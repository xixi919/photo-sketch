var Canvas=function(t){var e=document.getElementById(t),n=e.getContext("2d"),o=!1,i=0,a=0,c=0,h=0,u=!1,d="black",s=2,f=function(){n.beginPath(),n.moveTo(i,c),n.lineTo(a,h),n.strokeStyle=d,n.lineWidth=s,n.lineCap="round",n.stroke(),n.closePath()},r=function(t,s){("down"==t||"touchdown"==t)&&(i=a,c=h,"touchdown"==t?(a=s.touches[0].pageX-e.offsetLeft,h=s.touches[0].pageY-e.offsetTop,s.preventDefault()):(a=s.clientX-e.offsetLeft,h=s.clientY-e.offsetTop),o=!0,u=!0,u&&(n.beginPath(),n.fillStyle=d,n.fillRect(a,h,2,2),n.closePath(),u=!1)),("up"==t||"out"==t)&&(o=!1),("move"==t||"touchmove"==t)&&o&&(i=a,c=h,"touchmove"==t?(a=s.touches[0].pageX-e.offsetLeft,h=s.touches[0].pageY-e.offsetTop,s.preventDefault()):(a=s.clientX-e.offsetLeft,h=s.clientY-e.offsetTop),f())};e.addEventListener("mousemove",function(t){r("move",t)},!1),e.addEventListener("mousedown",function(t){r("down",t)},!1),e.addEventListener("mouseup",function(t){r("up",t)},!1),e.addEventListener("mouseout",function(t){r("out",t)},!1),e.addEventListener("touchmove",function(t){r("touchmove",t)},!1),e.addEventListener("touchstart",function(t){r("touchdown",t)},!1),e.addEventListener("touchend",function(t){r("up",t)},!1),e.addEventListener("touchcancel",function(t){r("out",t)},!1),this.changeColour=function(t){d=t},this.changeSize=function(t){s=t},this.discard=function(){n.clearRect(0,0,e.width,e.height)},this.setImgInput=function(t){var e=document.getElementById(t);e.addEventListener("change",this.drawImage,!1)},this.drawImage=function(t){var o=URL.createObjectURL(t.target.files[0]),i=new Image;i.onload=function(){n.drawImage(i,0,0,e.width,e.height)},i.src=o},this.getDataURL=function(){return e.toDataURL()},this.rotateClockwise=function(t){var o=document.createElement("canvas"),i=o.getContext("2d");o.width=e.width,o.height=e.height,i.drawImage(e,0,0,e.width,e.height),n.clearRect(0,0,e.width,e.height),n.save(),n.translate(e.width/2,e.height/2),n.rotate(90*Math.PI/180),n.drawImage(o,-e.height/2,-e.width/2,e.height,e.width),n.restore()}};
